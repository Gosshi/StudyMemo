# 関数とスコープ

## スコープ

Java などと同様に関数内で定義した変数は関数内でしか参照できない
→ 関数スコープと呼ぶ
また、スコープが異なれば、同じ変数名を宣言できる

```js
// 異なる関数のスコープには同じ"x"を定義できる
function fnA() {
  let x;
}
function fnB() {
  let x;
}
```

<br>

## ブロックスコープ

`{}`で囲んだ範囲をブロックと呼び、ブロック内で宣言した変数はブロック内でのみ参照可能  
if 文とか  
ブロックがネストしているときでも、Inner から Outer への参照は可能  
スコープは内側から外側へと変数が定義されているかどうか確認していく  
これを<b>スコープチェーン</b>と呼ぶ

```js
/**
 * 1. INNERブロックスコープに変数xyzがあるかを確認 => ない
 * 2. ひとつ外側のOUTERブロックスコープに変数xyzがあるかを確認 => ない
 * 3. 一番外側のスコープにも変数xyzは定義されていない => ReferenceErrorが発生
 */
{
  // OUTERブロックスコープ
  {
    // INNERブロックスコープ
    console.log(xyz); // => ReferenceError: xyz is not defined
  }
}
```

### Tips

変数のスコープは最小範囲にしておくべき  
→ どこでその変数が参照されているかわからなくなるため

<br>

---

## クロージャー
ToDo： もう少し調べる
「外側のスコープにある変数への参照を保持できる」性質

- 静的スコープ: ある変数がどの値を参照するかは静的に決まる
  - ただし、`this`を使う場合のみ動的スコープとなる
- メモリ管理の仕組み: 参照されなくなったデータはガベージコレクションにより解放される
